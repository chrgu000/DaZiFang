<!DOCTYPE html>
<html>
  <head>
    <title>7.5 刷脸登录</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <link href="resources/css/jquery-ui-themes.css" type="text/css" rel="stylesheet"/>
    <link href="resources/css/axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="data/styles.css" type="text/css" rel="stylesheet"/>
    <link href="files/7_5_刷脸登录/styles.css" type="text/css" rel="stylesheet"/>
    <script src="resources/scripts/jquery-1.7.1.min.js"></script>
    <script src="resources/scripts/jquery-ui-1.8.10.custom.min.js"></script>
    <script src="resources/scripts/prototypePre.js"></script>
    <script src="data/document.js"></script>
    <script src="resources/scripts/prototypePost.js"></script>
    <script src="files/7_5_刷脸登录/data.js"></script>
    <script type="text/javascript">
      $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; };
      $axure.utils.getOtherPath = function() { return 'resources/Other.html'; };
      $axure.utils.getReloadPath = function() { return 'resources/reload.html'; };
    </script>
  </head>
  <body>
    <div id="base" class="">

      <!-- Unnamed (Image) -->
      <div id="u1228" class="ax_default image">
        <img id="u1228_img" class="img " src="images/0_启动页/u3.png"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u1229" class="ax_default shape">
        <img id="u1229_img" class="img " src="images/0_启动页/u4.png"/>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u1230" class="ax_default image">
        <img id="u1230_img" class="img " src="images/0_启动页/u5.png"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u1231" class="ax_default paragraph">
        <div id="u1231_div" class=""></div>
        <div id="u1231_text" class="text ">
          <p><span>刷脸登录</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u1232" class="ax_default box_1">
        <div id="u1232_div" class=""></div>
        <div id="u1232_text" class="text ">
          <p><span>&lt;</span></p>
        </div>
      </div>

      <!-- Unnamed (Horizontal Line) -->
      <div id="u1233" class="ax_default horizontal_line">
        <img id="u1233_img" class="img " src="images/6__个人中心/u707.png"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u1234" class="ax_default label">
        <div id="u1234_div" class=""></div>
        <div id="u1234_text" class="text ">
          <p><span>180 **** 5278 </span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u1235" class="ax_default box_2">
        <div id="u1235_div" class=""></div>
      </div>

      <!-- Unnamed (Horizontal Line) -->
      <div id="u1236" class="ax_default horizontal_line">
        <img id="u1236_img" class="img " src="images/7_5_刷脸登录/u1236.png"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u1237" class="ax_default box_2">
        <div id="u1237_div" class=""></div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u1238" class="ax_default label">
        <div id="u1238_div" class=""></div>
        <div id="u1238_text" class="text ">
          <p><span>切换登录方式</span></p>
        </div>
      </div>

      <!-- Unnamed (Ellipse) -->
      <div id="u1239" class="ax_default ellipse">
        <img id="u1239_img" class="img " src="images/7_5_刷脸登录/u1239.png"/>
        <div id="u1239_text" class="text ">
          <p><span>头像</span></p>
        </div>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u1240" class="ax_default image">
        <img id="u1240_img" class="img " src="images/7_5_刷脸登录/u1240.png"/>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u1241" class="ax_default image">
        <img id="u1241_img" class="img " src="images/0_启动页/u3.png"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u1242" class="ax_default shape">
        <img id="u1242_img" class="img " src="images/6_6_1_未认证/u956.png"/>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u1243" class="ax_default image">
        <img id="u1243_img" class="img " src="images/0_启动页/u5.png"/>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u1244" class="ax_default image">
        <img id="u1244_img" class="img " src="images/6_6_1_未认证/u967.png"/>
      </div>

      <!-- Unnamed (Horizontal Line) -->
      <div id="u1245" class="compound ax_default horizontal_line" WidgetHeight="3" WidgetWidth="76" CompoundMode="true">
        <img id="u1245_img" class="singleImg img " src="images/2_2_线上预审/u554.png"/>
        <div id="u1245p000" class="ax_vector_shape" WidgetTopLeftX="-0.463414634146341" WidgetTopLeftY="-0.166666666666667" WidgetTopRightX="0.463414634146341" WidgetTopRightY="-0.166666666666667" WidgetBottomLeftX="-0.463414634146341" WidgetBottomLeftY="0.333333333333333" WidgetBottomRightX="0.463414634146341" WidgetBottomRightY="0.333333333333333">
          <img id="u1245p000_img" class="img " src="images/6_6_1_未认证/u968p000.png"/>
        </div>
        <div id="u1245p001" class="ax_vector_shape" WidgetTopLeftX="-0.321428571428571" WidgetTopLeftY="-0.0384615384615385" WidgetTopRightX="2.39285714285714" WidgetTopRightY="-0.0384615384615385" WidgetBottomLeftX="-0.321428571428571" WidgetBottomLeftY="0.0769230769230769" WidgetBottomRightX="2.39285714285714" WidgetBottomRightY="0.0769230769230769">
          <img id="u1245p001_img" class="img " src="images/6_6_1_未认证/u968p001.png"/>
        </div>
        <div id="u1245p002" class="ax_vector_shape" WidgetTopLeftX="2.46428571428571" WidgetTopLeftY="0.0384615384615385" WidgetTopRightX="-0.25" WidgetTopRightY="0.0384615384615385" WidgetBottomLeftX="2.46428571428571" WidgetBottomLeftY="-0.0769230769230769" WidgetBottomRightX="-0.25" WidgetBottomRightY="-0.0769230769230769">
          <img id="u1245p002_img" class="img " src="images/6_6_1_未认证/u968p002.png"/>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u1246" class="ax_default label">
        <div id="u1246_div" class=""></div>
        <div id="u1246_text" class="text ">
          <p><span>点击进行刷脸登录</span></p>
        </div>
      </div>

      <!-- Unnamed (Ellipse) -->
      <div id="u1247" class="ax_default flow_shape">
        <img id="u1247_img" class="img " src="images/1__首页/u24.png"/>
        <div id="u1247_text" class="text ">
          <p><span>1</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u1248" class="ax_default paragraph">
        <div id="u1248_div" class=""></div>
        <div id="u1248_text" class="text ">
          <p><span>1. 刷脸登录时，根据语音提示，在用户摇头、张嘴、闭眼时前置摄像头连续拍照，采集6张图片。</span></p><p><span><br></span></p><p><span>1.1 调用Detect API，传入采集的脸部照片，创建新的face_token</span></p><p><span><br></span></p><p><span>1.2 调用Compare API，把1.1返回的face_token和用户表中已经存储的face_token进行比对。比对成功，则让其成功登录APP，若不成功，则给出提示：</span></p><p><span><br></span></p><p><span style="color:#0000FF;">刷脸失败</span></p><p><span style="color:#0000FF;">请确保本人操作，剩余尝试次数4次</span></p><p><span style="color:#0000FF;"><br></span></p><p><span style="color:#0000FF;">再来一次，密码登录</span></p><p><span><br></span></p><p><span><br></span></p><p><span><br></span></p><p><span>2. 动画要求</span></p><p><span>&nbsp;&nbsp;&nbsp; 当声音提示用户做摇头、张嘴、闭眼的时候，下方动画也做相应的摇头、张嘴、闭眼动作播放；</span></p><p><span><br></span></p><p><span>3. 向后台提交后，要显示进度条。</span></p>
        </div>
      </div>

      <!-- Unnamed (Ellipse) -->
      <div id="u1249" class="ax_default flow_shape">
        <img id="u1249_img" class="img " src="images/1__首页/u24.png"/>
        <div id="u1249_text" class="text ">
          <p><span>2</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u1250" class="ax_default label">
        <div id="u1250_div" class=""></div>
        <div id="u1250_text" class="text ">
          <p><span>用户登录成功后，系统获取当前用户的位置信息，并把位置信息（经、纬度）存储到用户的登录日志中</span></p><p><span><br></span></p><p><span>以下三种登录方式都要做上述处理</span></p><p><span>1. 手机号、密码登录；</span></p><p><span>2. 第三方登录；</span></p><p><span>3. 刷脸登录；</span></p><p><span><br></span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u1251" class="ax_default label">
        <div id="u1251_div" class=""></div>
        <div id="u1251_text" class="text ">
          <p><span>注：</span></p><p><span>采集6张图片的目的：为一个用户创建6个facetoken，登录时 只传一张图片 那这一张分别跟认证的六张图片进行对比，只要有一张是相符的，就让其登录。</span></p><p><span><br></span></p><p><span>人脸登录接口设计：</span></p><p><span>1. APP端在提示语音播报开始后的2秒中拍照，把拍照图片和手机号传入刷脸登录接口；</span></p><p><span>2. 接口拿到照片和用户的第一个facetoken值去调用face++的compare接口，若返回的confidence的值大于0.7就让其成功登录。遍历用户的所有的facetoken，若第一个返回的confidence小于0.7，就拿第二个再去掉用compare接口，若最后一个facetoken的返回值confidence也小于0.7，就提示登录失败。给到APP端登录失败，APP提示登录失败，请用户重新拍照。</span></p>
        </div>
      </div>
    </div>
  </body>
</html>
